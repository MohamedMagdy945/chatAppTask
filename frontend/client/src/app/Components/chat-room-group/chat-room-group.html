@if (group) {
<main class="flex-1 flex flex-col">

    <div class="flex items-center justify-between border-b border-gray-200 px-6 py-4 bg-white shadow-sm">
        <div class="flex items-center gap-3">
            <div class="relative">
                <img [src]="group.groupImagePath ? baseURL + group.groupImagePath : 'assets/images/default.jpg'"
                    alt="{{group.name}}" class="w-12 h-12 rounded-full object-cover border-2 border-blue-100 shadow" />
                <div class="absolute bottom-0 right-0 w-3 h-3 bg-green-400 rounded-full border-2 border-white"></div>
            </div>
            <div>
                <h3 class="text-lg font-bold text-gray-900">{{ group.name }}</h3>
                <p class="text-xs text-green-500 flex items-center gap-1">
                    <span class="w-2 h-2 bg-green-500 rounded-full"></span>
                    Online
                </p>
            </div>
        </div>
        <div class="flex items-center gap-4 text-gray-500">
            <button class="p-2 rounded-full hover:bg-gray-100 transition"><i class="fas fa-phone-alt"></i></button>
            <button class="p-2 rounded-full hover:bg-gray-100 transition"><i class="fas fa-video"></i></button>
            <button class="p-2 rounded-full hover:bg-gray-100 transition"><i class="fas fa-ellipsis-v"></i></button>
        </div>
    </div>

    @if(messageList.length){
    <div class="min-h-145 flex-1 overflow-y-auto px-6 py-4 space-y-6 bg-gradient-to-b ">

        @for (message of messageList; track message.id) {
        @if (message.senderId === currentUser.id) {
        <div class="flex justify-end max-w-2xl ml-auto">
            <div class="relative">
                <div class="bg-blue-500 text-white rounded-2xl rounded-tr-none px-4 py-3 shadow-sm">
                    <p>{{ message.content }}</p>
                </div>
                <div
                    class="absolute -right-2 bottom-0 w-0 h-0 border-t-0 border-r-0 border-b-8 border-l-8 border-t-transparent border-r-transparent border-b-blue-500 border-l-transparent">
                </div>
            </div>
        </div>
        }
        @else {
        <div class="flex items-start gap-2 max-w-2xl">
            <img [src]="'assets/images/default.jpg'" alt="otherMember" class="w-8 h-8 rounded-full object-cover mt-1" />
            <div class="relative">
                <div class="bg-white rounded-2xl rounded-tl-none px-4 py-3 shadow-sm border border-gray-100">
                    <p class="text-gray-800">{{ message.content }}</p>
                </div>
                <div
                    class="absolute -left-2 bottom-0 w-0 h-0 border-t-0 border-r-8 border-b-8 border-l-0 border-t-transparent border-r-white border-b-transparent border-l-transparent">
                </div>
            </div>
        </div>
        }
        }

    </div>
    }
    @else {
    <div class="min-h-145"></div>
    }

    <div class="border-gray-200 bg-white mt-2">
        <div class="flex items-center gap-2">
            <button class="p-2 text-gray-500 hover:text-blue-500 rounded-full hover:bg-blue-50 transition pb-2">
                <i class="fas fa-plus"></i>
            </button>
            <button class="p-2 text-gray-500 hover:text-blue-500 rounded-full hover:bg-blue-50 transition">
                <i class="fas fa-image"></i>
            </button>
            <button class="p-2 text-gray-500 hover:text-blue-500 rounded-full hover:bg-blue-50 transition">
                <i class="fas fa-paperclip"></i>
            </button>

            <div class="flex-1 relative">
                <input type="text" placeholder="Type a message..." [(ngModel)]="message.content"
                    class="w-full bg-gray-100 rounded-2xl py-3 px-4 focus:outline-none focus:ring-2 focus:ring-blue-300 focus:bg-white transition-all" />
            </div>

            <button (click)="sendMessage()"
                class="p-2 bg-green-600 text-white rounded-full hover:bg-green-700 transition shadow-sm">
                <i class="fa-solid fa-paper-plane"></i>
            </button>
        </div>
    </div>
</main>
}

<div class="border-gray-200 bg-white mt-2">
    <div class="flex items-center gap-2">
        <button class="p-2 text-gray-500 hover:text-blue-500 rounded-full hover:bg-blue-50 transition pb-2">
            <i class="fas fa-plus"></i>
        </button>
        <button class="p-2 text-gray-500 hover:text-blue-500 rounded-full hover:bg-blue-50 transition">
            <i class="fas fa-image"></i>
        </button>
        <button class="p-2 text-gray-500 hover:text-blue-500 rounded-full hover:bg-blue-50 transition">
            <i class="fas fa-paperclip"></i>
        </button>

        <div class="flex-1 relative">
            <input type="text" placeholder="Type a message..." [(ngModel)]="message.content"
                class="w-full bg-gray-100 rounded-2xl py-3 px-4 focus:outline-none focus:ring-2 focus:ring-blue-300 focus:bg-white transition-all" />
        </div>

        <button (click)="sendMessage()"
            class="p-2 bg-green-600 text-white rounded-full hover:bg-green-700 transition shadow-sm">
            <i class="fa-solid fa-paper-plane"></i>
        </button>
    </div>
</div>